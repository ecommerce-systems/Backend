@startuml
title 사용자 회원가입 액티비티 다이어그램

start

:클라이언트가 POST /auth/signup으로
사용자 데이터 (SignUpRequest) 전송;

:백엔드(UserService)에서 요청 수신;

:AuthRepository에서 사용자명 존재 여부 확인;

if (사용자명 존재?) then (예)
  :IllegalArgumentException 예외 발생;
  :HTTP 400 Bad Request 반환;
  stop
else (아니오)
  :원시 비밀번호 인코딩;
  :새 Auth 엔티티 생성
(사용자명, 인코딩된 비밀번호, 역할='USER');
  :AuthRepository를 통해 DB에 Auth 엔티티 영속화;

  :새 User 엔티티 생성
(이름, 전화번호, 주소);
  :새 Auth 엔티티와 User 연관 관계 설정;
  :UserRepository를 통해 DB에 User 엔티티 영속화;

  :HTTP 200 OK 반환;
endif

stop

@enduml
